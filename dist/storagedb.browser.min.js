var storagedb=function(e){"use strict";function t(e){if(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.length||(n[0]=null),e.apply(void 0,n)}}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e){for(var t=arguments.length,o=Array(t>1?t-1:0),c=1;c<t;c++)o[c-1]=arguments[c];for(var u=0;u<o.length;u++){var i=o[u];for(var s in i)i.hasOwnProperty(s)&&("object"===n(i[s])?e[s]="object"===n(e[s])?r(e[s],i[s]):i[s]:e[s]=i[s])}return e}e=e&&e.hasOwnProperty("default")?e.default:e;var o=function(n,r){var o=n.name,c=n.id,u=void 0,i=void 0;try{r?(u=e.sessionStorage,i="sessionStorage"):(u=e.localStorage,i="localStorage")}catch(e){return}return{type:i,set:function(e,n){for(var r=JSON.parse(u.getItem(o))||[],i=!1,s=0;s<r.length;s++)if(r[s][c]===e[c]){i=!0,r[s]=e;break}i||r.push(e),u.setItem(o,JSON.stringify(r)),t(n,null,e)},setAll:function(e,n){for(var r=function(e,n){var r=[];return{countDown:function(o){r.push(o),r.length===e&&t(n,null,r)}}}(e.length,n),o=0;o<e.length;o++){var c=e[o];this.set(c,r.countDown)}},get:function(e,n){var r=u.getItem(o);if(r){for(var i=JSON.parse(r)||[],s=0;s<i.length;s++)if(i[s][c]===e)return void t(n,null,i[s]);return t(n)}t(n)},getAll:function(e){var n=u.getItem(o);t(e,null,n?JSON.parse(n):[])},remove:function(e,n){t(n);var r=u.getItem(o);if(r)for(var i=JSON.parse(r),s=0;s<i.length;s++)if(i[s][c]===e)return i.splice(s,1),void u.setItem(o,JSON.stringify(i))},removeAll:function(e){u.removeItem(o),t(e)},close:function(){}}},c=function(e){return o(e,!0)},u="storagedb",i=function(n){function c(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];p?y[e].apply(y,n):h.push(function(){return y[e].apply(y,n)})}}function i(e){g("IndexedDB: going to create objectStore "+f),p.close();var t=p.version+1,n=v.open(u,t);n.onupgradeneeded=function(){(p=n.result).createObjectStore(f,{keyPath:d})},n.onsuccess=function(){g("IndexedDB: created objectStore "+f),e()},n.onerror=function(t){return e(t)}}function s(e){r(y,e);for(var t=0;t<h.length;t++){(0,h[t])()}}function a(e){g("An error ocurred: switching to localStorage",e),g("pending:",h),s(o)}function l(e){g("IndexedDB Error: "+e.message+" (Code "+e.code+")",e)}var f=n.name,d=n.id,g=n.debug,v=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,p=void 0,h=[],m=/Trident\/|MSIE|Edge\//.test(e.navigator.userAgent);if(!v||m)return!1;var b=v.open(u);b.onsuccess=function(){(p=b.result).objectStoreNames.contains(f)?(g("pending:",h),s(S)):i(function(e){if(e)return a(e);g("pending:",h),s(S)})},b.onerror=a;var y={type:"indexedDB",set:c("set"),setAll:c("setAll"),get:c("get"),getAll:c("getAll"),remove:c("remove"),removeAll:c("removeAll"),close:c("close")},S={set:function(e,n){try{var r=p.transaction([f],"readwrite"),o=r.objectStore(f).put(e);r.onerror=l,o.onsuccess=function(){return t(n,null,e)},o.onerror=l}catch(r){3!==r.code&&8!==r.code?(l(r),t(n,r)):(g("IndexedDB: going to create objectStore "+f),i(function(){S.set(e,n)}))}},setAll:function(e,n){var r=function(e,n,r){var o=0;return{next:function(){o<e.length?n(e[o++]):t(r,null,e)}}}(e,function(e){S.set(e,r.next)},n);r.next()},get:function(e,n){try{var r=p.transaction([f],"readwrite");r.onerror=l;r.objectStore(f).get(e).onsuccess=function(e){t(n,null,e.target.result)}}catch(e){l(e),t(n,e)}},getAll:function(e){try{var n=p.transaction([f],"readwrite");n.onerror=l;var r=n.objectStore(f);if(r.getAll)r.getAll().onsuccess=function(n){t(e,null,n.target.result)};else{var o=[];r.openCursor().onsuccess=function(n){var r=n.target.result;r?(o.push(r.value),r.continue()):t(e,null,o)}}}catch(n){t(e,n,[])}},remove:function(e,n){if(p.objectStoreNames.contains(f)){p.transaction([f],"readwrite").objectStore(f).delete(e).onsuccess=function(){return t(n)}}else g("IndexedDB: missing objectStore "+f),t(n)},removeAll:function(e){S.close();var n=p.version+1,r=v.open(u,n);r.onupgradeneeded=function(){try{(p=r.result).objectStoreNames.contains(f)&&p.deleteObjectStore(f)}catch(e){3!==e.code&&8!==e.code&&l(e)}},r.onsuccess=function(n){t(e,null,n)}},close:function(){p.close()}};return y};return function(e,t){if("object"===n(e)&&(e=(t=e).name),t=r({name:e,type:null,id:"id",debug:!1},t||{}),t.debug=t.debug?function(){var e;return(e=console).log.apply(e,arguments)}:function(){},!e)throw new Error("you must pass in a entity to storageSet");var u={"indexed-db":i,"local-storage":o,"session-storage":c},s=Object.keys(u);t.type&&s.unshift(t.type);for(var a=0;a<s.length;a++){var l=s[a],f=u[l]&&u[l](t);if(f)return f.clear=f.removeAll,f}throw new Error("You can only use one of these types for storagedb "+s.join(", "))}}(window);
